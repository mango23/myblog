---
title: canvas小球动画
date: 2017-02-14 10:43:30
tags: canvas
categories: canvas
description: canvas小球动画
---

```html 
	<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			canvas {
				border: 1px dotted #FF751A;
			}
		</style>
	</head>

	<body style="background: #000;">
		<canvas id="canvas" width="200" height="200"></canvas>
	</body>
	<script type="text/javascript">
```
	
```javascript	
		var canvas = document.getElementById('canvas');
		var ctx = canvas.getContext('2d');
		var balls = [];
		var ballCount = 100;
//		var ballObj = {
//			ball
//		}
		function Ball(x, y, vx, vy, radius, color) {
			this.x = getRandomNum(0,200);
			this.y = getRandomNum(0,200);
			this.vx = getRandomNum(0,5);
			this.vy = getRandomNum(0,5);
			this.radius = getRandomNum(5,10);
			this.color = getColor();
		}
		Ball.prototype.draw = function() {
			ctx.save();
			ctx.beginPath();
			ctx.fillStyle = "#00CC7D";
			ctx.lineWidth = 5;
			ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);
			ctx.closePath();
			ctx.fill();
			ctx.restore();
		}
		Ball.prototype.update = function(){
			this.x += this.vx;
			this.y += this.vy;

			if(this.y + this.vy > canvas.height || this.y + this.vy < 0) {
				this.vy = -this.vy;
				//				ball.y = 0;
			}
			if(this.x + this.vx > canvas.width || this.x + this.vx < 0) {
				this.vx = -this.vx;
				//				ball.x = 0;
			}
		}
		function init() {

			for(var i = 0; i < ballCount; i++) {
				balls.push(new Ball());
			}
			drawBall()
		}
		init()
		function drawBall() {
			clear();
			for(var i = 0; i < ballCount; i++) {
				balls[i].draw();
				balls[i].update();
			}
			window.requestAnimationFrame(drawBall);
		}
	
		//		setInterval(draw,60)
		function getRandomNum(x, y) {
			return Math.floor(Math.random() * (y - x) + x)
		}

		function getColor() {
			return "rgb(" + getRandomNum(0, 255) + "," + getRandomNum(0, 255) + "," + getRandomNum(0, 255) + ")";
		}

		function clear() {
			ctx.fillStyle = 'rgba(0,0,0,.3)';
			ctx.fillRect(0, 0, canvas.width, canvas.height);
		}
```
``` html
</script>
	</html>
```